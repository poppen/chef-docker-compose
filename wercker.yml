box: wercker-labs/docker
no-response-timeout: 10
build:
  steps:
    - script:
        name: Setup userland
        code: |
          sudo apt-get -y update
          sudo apt-get -y install ruby2.0
          sudo apt-get -y install lxc-docker
          echo "gem: --no-rdoc --no-ri" >> $HOME/.gemrc
          sudo gem install bundler
    - bundle-install:
        jobs: 4
    - script:
        name: kitchen test
        code: |
          bundle exec kitchen test
  after-steps:
    - auxesis/slack-notify-via-webhook:
        webhook_url: $SLACK_WEBHOOK_URL
        channel: "#general"
